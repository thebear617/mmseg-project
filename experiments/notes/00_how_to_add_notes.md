# 笔记添加指南（AI参考文档）

> **重要说明**: 本文档为AI提供添加新笔记的标准流程、文件分类规则和操作规范。
> 
> **使用要求**: 当用户要求添加笔记时，AI必须首先读取本文档（`experiments/notes/00_how_to_add_notes.md`），了解文件分类规则和操作规范，然后按照规则执行操作。
> 
> **工作原理**: AI不会自动读取文件，必须在提示词中明确要求，或AI主动判断需要时才会读取。因此，所有提示词模板都包含"参考本文档"的要求。

---

## 📋 标准提示词模板

### 模板 1: 完整版（推荐）

```
请帮我在 experiments/notes/ 目录下添加以下笔记内容：

【笔记标题】: [你的笔记标题]
【笔记内容】: 
[在这里粘贴或描述你要记录的笔记内容]

【分类提示】: [可选，帮助AI识别应该添加到哪个文件]
- 环境相关 / Git基础 / Git高级 / 故障排查 / 其他

请按照以下要求操作：
1. 首先读取 experiments/notes/00_how_to_add_notes.md，了解文件分类匹配规则、文件大小控制标准和README更新规则
2. 根据规则自动识别应该添加到哪个md文件（根据内容主题匹配现有文件）
3. 如果现有文件没有匹配的主题，创建新文件（命名格式：05_主题名.md，按序号递增）
4. 确保文件大小合理（单个文件不超过500行，如果添加后超过则考虑拆分或精简）
5. 自动更新 README.md：
   - 如果新建文件，添加完整索引（标题、适用场景、包含内容、何时查阅）
   - 如果更新现有文件，更新对应的"包含内容"列表
   - 更新"快速查找"表格（如需要）
6. 保持文件内部目录结构清晰，章节编号连续
```

### 模板 2: 简化版（日常使用）

```
添加笔记到 experiments/notes/：

标题：[笔记标题]
内容：[笔记内容]
分类：[环境/Git基础/Git高级/故障排查/其他]

要求：
- 参考 experiments/notes/00_how_to_add_notes.md 中的规则
- 自动识别匹配的文件或新建
- 控制文件大小（<500行）
- 更新 README.md
```

**注意**: 此模板明确要求AI读取规则文件，确保AI按照标准流程操作。

---

## 🗂️ 文件分类匹配规则表（AI参考）

| 内容主题关键词 | 匹配文件 | 文件编号 | 示例内容 |
|--------------|---------|---------|---------|
| **环境变量、PYTHONPATH、软链接、conda、venv、系统配置、环境设置、路径配置** | `02_environment_setup.md` | 02 | "如何设置PYTHONPATH"、"conda环境管理" |
| **Git日常操作、提交流程、基本命令、工作流程、git add、git commit、git push、版本控制基础** | `03_git_basics.md` | 03 | "如何提交代码"、"Git工作流程" |
| **版本回溯、分支管理、Git LFS、高级功能、git reset、git rebase、git merge、撤销提交** | `04_git_advanced.md` | 04 | "如何回退版本"、"分支合并策略" |
| **错误解决、故障排查、常见问题、快速参考、问题解决、错误处理、调试** | `05_troubleshooting.md` | 05 | "遇到XXX错误怎么办"、"问题排查" |
| **Python技巧、代码优化、编程技巧** | `05_python_tips.md` | 05 | Python相关技巧（新建） |
| **Docker、容器化、部署** | `05_docker_deployment.md` | 05 | Docker相关（新建） |
| **深度学习、模型训练、数据处理、可视化** | `06_deep_learning.md` | 06 | 深度学习相关（新建） |
| **mmsegmentation特定、实验技巧、项目特定** | `07_mmseg_tips.md` | 07 | 项目特定内容（新建） |
| **其他新主题** | `NN_主题名.md` | 08+ | 按序号递增（新建） |

### 匹配优先级

1. **精确匹配**: 内容主题与现有文件完全匹配 → 添加到现有文件
2. **部分匹配**: 内容主题与现有文件部分匹配 → 添加到现有文件
3. **无匹配**: 内容主题与现有文件都不匹配 → 创建新文件

### 新文件命名规则

- **格式**: `NN_主题名.md`（NN为两位数字，从05开始）
- **编号规则**: 按创建顺序递增（05, 06, 07...）
- **主题名**: 使用英文，小写，下划线分隔
- **示例**: `05_python_tips.md`, `06_docker_setup.md`, `07_model_deployment.md`

---

## 📏 文件大小控制标准

### 大小限制

- **理想大小**: 300-400行
- **最大限制**: 500行
- **最小有效**: 50行（少于50行的内容考虑合并到相关文件）

### 超过限制时的处理策略

**情况1: 添加内容后文件超过500行**

**策略A - 拆分文件**（推荐）:
- 将某个章节独立成新文件
- 在原文件中保留简要说明和链接
- 新文件命名：`原文件名_章节名.md` 或 `NN_新主题.md`

**策略B - 精简内容**:
- 删除冗余内容
- 合并相似章节
- 将详细示例移到故障排查文件

**策略C - 创建子主题文件**:
- 将某个大章节独立成新文件
- 在原文件中保留简要说明和链接

### 大小检查

添加内容前，先检查文件当前大小：
```bash
wc -l experiments/notes/目标文件.md
```

---

## 📝 README.md 更新规则

### 新建文件时的更新

**必须添加**:

1. **文件索引部分**（在"📚 文件索引"章节）:
   ```markdown
   ### NN_新主题.md - 新主题说明
   **适用场景**: [何时使用，1-2句话]
   
   **包含内容**:
   - [内容点1]
   - [内容点2]
   - [内容点3]
   
   **何时查阅**: 
   - [场景1]
   - [场景2]
   ```

2. **快速查找表格**（在"🔍 快速查找"章节）:
   ```markdown
   | [新需求描述] | `NN_新主题.md` |
   ```

3. **使用指南**（如需要，在"🗺️ 使用指南"章节）:
   - 添加到"按使用频率"或"按学习阶段"部分

### 更新现有文件时的更新

**需要更新**:
1. **包含内容列表**: 在对应文件的索引中添加新章节或内容点
2. **快速查找表格**: 如新增了常见需求，添加对应条目

**不需要更新**:
- 文件索引的标题和适用场景（除非主题发生重大变化）

---

## 🎯 内容组织规范

### 章节编号规则

- **一级标题**: `## N. 章节名`（N为数字，从1开始）
- **二级标题**: `### N.M 子章节名`（M为数字）
- **三级标题**: `#### N.M.K 更细的章节`（K为数字）
- **保持连续**: 章节编号必须连续，不能跳跃

### 目录结构

每个文件开头应该有目录：
```markdown
## 目录

- [1. 章节1](#1-章节1)
  - [1.1 子章节](#11-子章节)
- [2. 章节2](#2-章节2)
```

### 格式规范

- **代码块**: 使用三个反引号，标注语言类型
- **表格**: 使用Markdown表格格式
- **列表**: 使用 `-` 或 `*`，保持缩进一致
- **强调**: 使用 `**粗体**` 或 `*斜体*`

---

## ✅ 操作检查清单

添加笔记时，AI应完成以下检查：

- [ ] **读取规则文件**: 首先读取 `experiments/notes/00_how_to_add_notes.md`，了解所有规则
- [ ] **文件识别**: 根据规则表中的关键词匹配，正确识别应该添加到哪个文件（或创建新文件）
- [ ] **大小控制**: 检查文件大小（使用 `wc -l`），确保不超过500行
- [ ] **内容组织**: 章节编号连续，目录结构清晰
- [ ] **README更新**: 
  - 新建文件：添加完整索引和快速查找条目
  - 更新文件：更新"包含内容"列表
- [ ] **格式一致**: 保持与现有文件格式一致
- [ ] **链接更新**: 更新文件间的相关链接（如有）

---

## 🔄 特殊情况处理

### 情况1: 内容涉及多个主题

**处理**: 在主要主题文件中详细说明，其他文件简要提及并链接
```markdown
**相关文档**: 
- [详细说明](../notes/主要文件.md)
```

### 情况2: 内容很短（<50行）

**处理**: 
- 如果与现有文件主题匹配，添加到现有文件
- 如果无匹配，考虑添加到故障排查文件

### 情况3: 内容很长（>200行）

**处理**: 
- 创建独立文件
- 在README中详细说明适用场景

### 情况4: 更新现有内容

**处理**: 
- 找到对应章节，更新内容
- 保持章节编号不变
- 更新README中的"包含内容"列表（如需要）

---

## 📊 文件统计参考

当前文件状态（作为参考）:

| 文件 | 行数 | 状态 |
|------|------|------|
| `00_how_to_add_notes.md` | ~ | 本文件（AI参考） |
| `01_how_to_maintain_context.md` | ~ | AI参考文档 |
| `02_environment_setup.md` | ~322 | ✅ 正常 |
| `03_git_basics.md` | ~402 | ✅ 正常 |
| `04_git_advanced.md` | ~405 | ⚠️ 接近上限 |
| `05_troubleshooting.md` | ~270 | ✅ 正常 |
| `README.md` | ~144 | ✅ 正常 |

**注意**: 当文件接近500行时，添加新内容前优先考虑拆分或精简。

---

## 🎓 示例参考

### 示例1: 添加到现有文件

**用户输入**:
```
添加笔记到 experiments/notes/：

标题：conda环境导出和导入
内容：conda env export > environment.yml 和 conda env create -f environment.yml
分类：环境设置

要求：
- 参考 experiments/notes/00_how_to_add_notes.md 中的规则
- 自动识别匹配的文件或新建
- 控制文件大小（<500行）
- 更新 README.md
```

**AI操作流程**:
1. **读取规则文件**: 读取 `experiments/notes/00_how_to_add_notes.md`，了解文件分类规则
2. **识别目标文件**: 根据"环境设置"分类和内容主题，匹配到 `02_environment_setup.md`
3. **检查文件大小**: 使用 `wc -l` 检查当前322行，添加后约340行 → ✅ 可以添加
4. **添加内容**: 在"1.3 永久设置方法"下添加新小节，保持章节编号连续
5. **更新README**: 在"02_environment_setup.md"的"包含内容"中添加"conda环境导出和导入"

### 示例2: 创建新文件

**用户输入**:
```
添加笔记到 experiments/notes/：

标题：Docker容器化部署完整指南
内容：[200+行的Docker相关内容]
分类：其他

要求：
- 参考 experiments/notes/00_how_to_add_notes.md 中的规则
- 自动识别匹配的文件或新建
- 控制文件大小（<500行）
- 更新 README.md
```

**AI操作流程**:
1. **读取规则文件**: 读取 `experiments/notes/00_how_to_add_notes.md`，了解文件分类和命名规则
2. **识别目标文件**: Docker主题 → 查看文件分类表 → 无匹配文件 → 需要创建新文件
3. **确定文件编号**: 查看现有文件编号（01-04），新文件编号为05
4. **创建文件**: `05_docker_deployment.md`，按照标准格式创建（包含目录、章节等）
5. **检查大小**: 新文件约200行 → ✅ 正常（在500行限制内）
6. **更新README**:
   - 在"📚 文件索引"部分添加文件索引（标题、适用场景、包含内容、何时查阅）
   - 在"🔍 快速查找"表格中添加条目："Docker部署 | `05_docker_deployment.md`"

---

## 🔗 相关文件

- [笔记目录索引](./README.md) - 用户查看的笔记索引
- [Agent上下文维护指南](./01_how_to_maintain_context.md)
- [环境设置指南](./02_environment_setup.md)
- [Git基础工作流程](./03_git_basics.md)
- [Git高级用法](./04_git_advanced.md)
- [故障排查指南](./05_troubleshooting.md)

---

**最后更新**: 2024-12-02  
**用途**: AI参考文档，帮助AI正确添加和管理笔记

